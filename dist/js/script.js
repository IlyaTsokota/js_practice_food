!function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(s,o,function(e){return t[e]}.bind(null,o));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".tabheader__item"),e=document.querySelectorAll(".tabcontent");function n(){e.forEach(t=>{t.classList.add("hide"),t.classList.remove("show","fade")}),t.forEach(t=>t.classList.remove("tabheader__item_active"))}function s(n=0){e[n].classList.add("show","fade"),e[n].classList.remove("hide"),t[n].classList.add("tabheader__item_active")}document.querySelector(".tabheader__items").addEventListener("click",e=>{const o=e.target;o&&o.classList.contains("tabheader__item")&&t.forEach((t,e)=>{o===t&&(n(),s(e))})}),n(),s();const o=t=>t<10?`0${t}`:t;!function(t,e){const n=document.querySelector(t),s=n.querySelector("#days"),r=n.querySelector("#hours"),i=n.querySelector("#minutes"),a=n.querySelector("#seconds"),c=setInterval(d,1e3);function d(){const t=function(t){const e=Date.parse(t)-Date.parse(new Date);return{total:e,days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/6e4%60),seconds:Math.floor(e/1e3%60)}}(e);t.total<=0&&clearInterval(c),s.innerHTML=o(t.days),r.innerHTML=o(t.hours),i.innerHTML=o(t.minutes),a.innerHTML=o(t.seconds)}d()}(".timer","2021-05-11");const r=document.querySelectorAll("[data-modal]"),i=document.querySelector(".modal"),a=setTimeout(c,3e4,i);function c(t){t.classList.add("show"),t.classList.remove("hide"),t.classList.add("fade"),document.body.style.overflow="hidden",clearInterval(a)}function d(t){t.classList.remove("show"),t.classList.remove("fade"),t.classList.add("hide"),document.body.style.overflow=""}r.forEach(t=>{t.addEventListener("click",()=>{c(i)})}),i.addEventListener("click",t=>{(t.target&&t.target===i||""===t.target.getAttribute("data-close"))&&d(i)}),document.addEventListener("keydown",t=>{i.classList.contains("show")&&"Escape"===t.code&&d(i)}),window.addEventListener("scroll",(function t(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(c(i),window.removeEventListener("scroll",t))}));class l{constructor(t,e,n,s,o,r,...i){this.src=t,this.alt=e,this.title=n,this.desc=s,this.price=o,this.classes=i,this.transfer=27,this.parent=document.querySelector(r),this.changeToUAH()}changeToUAH(){this.price*=this.transfer}render(){const t=document.createElement("div");0===this.classes.length?(this.classes="menu__item",t.classList.add(this.classes)):this.classes.forEach(e=>t.classList.add(e)),t.innerHTML=`\n\t\t\t\t\t<img src="${this.src}" alt="${this.alt}">\n\t\t\t\t\t<h3 class="menu__item-subtitle">${this.title}</h3>\n\t\t\t\t\t<div class="menu__item-descr">${this.desc}</div>\n\t\t\t\t\t<div class="menu__item-divider"></div>\n\t\t\t\t\t<div class="menu__item-price">\n\t\t\t\t\t\t<div class="menu__item-cost">Цена:</div>\n\t\t\t\t\t\t<div class="menu__item-total"><span>${this.price}</span> грн/день</div>\n\t\t\t\t\t</div>\n\t\t\t`,this.parent.append(t)}}(async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Could not fetch ${t}, status: ${e.status}`);return await e.json()})("http://localhost:3000/menu").then(t=>{t.forEach(({img:t,altimg:e,title:n,descr:s,price:o})=>{new l(t,e,n,s,o,".menu .container","menu__item").render()})});const u=document.querySelectorAll("form"),m="img/spinner.svg",h="Спасибо! Скоро мы с вами свяжемся",f="Что-то пошло не так...";u.forEach(t=>{var e;(e=t).addEventListener("submit",t=>{t.preventDefault();const n=JSON.stringify(Object.fromEntries(new FormData(e).entries())),s=document.createElement("img");s.style.cssText="\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin: 0 auto;\n\t\t\t",s.setAttribute("src",m),e.insertAdjacentElement("afterend",s),(async(t,e)=>{const n=await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:e});return await n.json()})("http://localhost:3000/requests",n).then(t=>{console.log(t),v(h),s.remove()}).catch(()=>{v(f)}).finally(()=>{e.reset()})})});function v(t){const e=document.querySelector(".modal__dialog"),n=e.parentElement;e.classList.add("hide"),c(n);const s=document.createElement("div");s.classList.add("modal__dialog"),s.innerHTML=`\n\t\t\t<div class="modal__content">\n\t\t\t\t<div data-close class="modal__close">&times;</div>\n\t\t\t\t<div class="modal__title">${t}</div>\n\t\t\t</div>\n\t\t`,document.querySelector(".modal").append(s),setTimeout(()=>{s.remove(),e.classList.remove("hide"),d(n)},4e3)}})}]);
//# sourceMappingURL=script.js.map